<template>
  <div class="calculator">
    <div class="container">
      <div class="row">
        <div class="col text-left page-header padding-left--text margin--bottom">
          <h4>{{ msg }}</h4>
        </div>
      </div>
      <nav>
        <div id="nav-tab" class="nav nav-tabs" role="tablist">
          <a
            id="input-tab"
            class="nav-item nav-link"
            data-toggle="tab"
            href="#input-tab-content"
            role="tab"
            aria-controls="input"
            aria-selected="true"
            :class="{ 'active': visibleTab === 0}"
            @click="visibleTab = 0"
          >Input</a>
          <a
            id="result-tab"
            class="nav-item nav-link"
            data-toggle="tab"
            href="#result-tab-content"
            role="tab"
            aria-controls="result"
            aria-selected="false"
            :class="[result.totalRatio == null ? 'disabled': '',
                     visibleTab === 1 ? 'active' : '']"
            @click="visibleTab = 1"
          >Result</a>
        </div>
      </nav>
      <div id="tabContent" class="tab-content">
        <div
          id="input-tab-content"
          class="tab-pane fade"
          role="tabpanel"
          aria-labelledby="input-tab"
          :class="{ 'show active': visibleTab === 0 }"
        >
          <InputComponent v-on:submit-form="displayResults"></InputComponent>
        </div>
        <div
          id="result-tab-content"
          class="tab-pane fade"
          role="tabpanel"
          aria-labelledby="result-tab"
          :class="{ 'show active': visibleTab === 1 }"
        >
          <ResultComponent v-bind:result="result"></ResultComponent>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import InputComponent from "./InputComponent.vue";
import ResultComponent from "./ResultComponent.vue";

export default {
  name: "RefinancingCalc",
  components: {
    InputComponent,
    ResultComponent
  },
  data() {
    return {
      msg: "Refinancing Calculator",
      result: {
        estHomeValue: null,
        firstMortgageBalance: null,
        secondMortgageBalance: null,
        thirdMortgageBalance: null,
        firstLTVRatio: null,
        secondLTVRatio: null,
        thirdLTVRatio: null,
        totalRatio: null,
        totalAmountOwedToHome: null
      },
      visibleTab: 0,
      resultTabClick: 0
    };
  },

  methods: {
    displayResults(calculatedResults, estMortgages, estimatedHomeVal) {
      this.result.firstLTVRatio = 10;
      this.result.secondLTVRatio = 10.23456;
      this.result.thirdLTVRatio = 10;
      this.result.totalRatio = 10;
      this.result.totalAmountOwedToHome = 10;
      this.result.estHomeValue = 10;
      this.result.firstMortgageBalance = 10.34567;
      this.result.secondMortgageBalance = 10;
      this.result.thirdMortgageBalance = 10;
      this.visibleTab = 1;
    }
  }
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style lang="scss" scoped>
</style>
